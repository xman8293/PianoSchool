"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),n=require("../../utils/common.js"),a={__name:"index",setup(a){const o=e.ref(0);e.onMounted((()=>{const t=e.index.getSystemInfoSync();o.value=t.statusBarHeight||0,console.log("页面加载完成");const n=getCurrentPages();console.log("当前页面:",n[n.length-1].route),m(),p(),f()}));const s=e.ref([{image:"https://scrmconnect-1251489075.cos.ap-beijing.myqcloud.com/wxapp/piano/banner/banner1.png",jumpLink:"/pages/introduction/index"},{image:"https://scrmconnect-1251489075.cos.ap-beijing.myqcloud.com/wxapp/piano/banner/banner2.png",jumpLink:"/pages/introduction/index"},{image:"https://scrmconnect-1251489075.cos.ap-beijing.myqcloud.com/wxapp/piano/banner/banner3.png",jumpLink:"/pages/introduction/index"}]),r=e.ref('大奔儿音乐学校成立于2013年，是一家结合艺术培训、考级、艺术教学研发为一体的连锁培训机构，历时十年的沉淀，学校创下了良好的社会口碑，始终坚持"学做人，在学艺"的教学理念。2012年办学至今已培养出44名九级毕业生，33名考级优秀生。2019年至2022年被中央音乐学院评为优秀培训机构全国前五名...'),i=e.ref(!1),c=()=>{i.value=!i.value},u=e.computed((()=>r.value.substring(0,100)+"...")),l=e.ref([]),g=e.ref([]),d=e.ref([]),m=async()=>{try{const t=await e.er.callFunction({name:"getStudents",data:{page:1,pageSize:2,orderBy:"sort"}});console.log("学员数据响应:",t),200===t.result.code?l.value=t.result.data.list:e.index.showToast({title:"数据加载失败",icon:"none"})}catch(t){console.error("请求异常:",t),e.index.showToast({title:"网络异常",icon:"none"})}},p=async()=>{const t=await e.er.callFunction({name:"getCertificates",data:{page:1,pageSize:3,orderBy:"sort"}});g.value=t.result.data.list},f=async()=>{try{const t=await e.er.callFunction({name:"getEvents",data:{page:1,pageSize:2,status:"ongoing"}});if(console.log("活动数据:",t),200===t.result.code){const e=t.result.data.list.filter((e=>e.title&&e.cover&&e.start_time));d.value=e,console.log("有效活动数据:",JSON.parse(JSON.stringify(e)))}else e.index.showToast({title:"活动加载失败",icon:"none"})}catch(t){console.error("活动请求异常:",t),e.index.showToast({title:"网络异常",icon:"none"})}},v=t=>{["contact/form","teachers/index","groupbuy/index"].includes(t)?e.index.switchTab({url:`/pages/${t}`}):e.index.navigateTo({url:`/pages/${t}`})},x=e.ref(!1),b=e=>{switch(e){case"ongoing":return"ongoing";case"upcoming":return"upcoming";case"ended":return"ended";default:return""}},h=e=>{switch(e){case"ongoing":return"进行中";case"upcoming":return"即将开始";case"ended":return"已结束";default:return""}};return(a,o)=>e.e({a:e.f(s.value,((e,t,n)=>({a:e.image,b:t}))),b:e.t(i.value?r.value:u.value),c:e.t(i.value?"收起":"展开全文"),d:e.o(c),e:e.o((e=>v("students/index"))),f:e.f(l.value,((t,n,a)=>({a:t.avatar,b:e.t(t.name),c:e.t(t.intro),d:n}))),g:e.o((e=>v("certificates/index"))),h:e.f(g.value,((t,n,a)=>({a:t.image,b:e.t(t.name),c:n}))),i:e.o((e=>v("events/index"))),j:e.f(d.value,((t,a,o)=>({a:e.t(h(t.status)),b:e.n(b(t.status)),c:t.cover,d:e.t(t.title),e:e.t(e.unref(n.formatTime)(t.start_time)),f:e.t(t.brief),g:a}))),k:x.value},x.value?{l:e.f(3,((e,t,n)=>({a:e})))}:{},{m:t._imports_0,n:e.o((e=>v("contact/form")))})}},o=e._export_sfc(a,[["__scopeId","data-v-ffa645aa"]]);wx.createPage(o);
