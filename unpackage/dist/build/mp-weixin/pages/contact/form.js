"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),n={__name:"form",setup(n){const u=e.ref({name:"",phone:"",age:"",subject:""}),l=e.ref({name:"",phone:"",age:""}),t=e.ref(!1),o=e.ref(["钢琴","古筝","小提琴","吉他","声乐","其他"]),v=e=>{const a=e.detail.value;u.value.subject=o.value[a]},s=async()=>{if((()=>{let e=!0;const a={name:"",phone:"",age:""};return u.value.name.trim()||(a.name="姓名不能为空",e=!1),/^1[3-9]\d{9}$/.test(u.value.phone)||(a.phone="请输入有效的手机号",e=!1),(!u.value.age||u.value.age<3||u.value.age>18)&&(a.age="请输入3-18岁的有效年龄",e=!1),l.value=a,e})()){t.value=!0;try{const a=await e.er.callFunction({name:"submitFeedback",data:{...u.value,createTime:Date.now()}});if(200!==a.result.code)throw new Error(a.result.msg);e.index.showConfirm({title:"提交成功",content:"感谢您的咨询,我们会尽快与您联系",success:function(a){a.confirm&&e.index.navigateBack()}}),u.value={name:"",phone:"",age:"",subject:""}}catch(a){console.error("提交失败:",a),e.index.showToast({title:"提交失败，请重试",icon:"none"})}finally{t.value=!1}}};return(n,r)=>e.e({a:a._imports_0,b:l.value.name?1:"",c:u.value.name,d:e.o((e=>u.value.name=e.detail.value)),e:l.value.name},l.value.name?{f:e.t(l.value.name)}:{},{g:l.value.phone?1:"",h:u.value.phone,i:e.o((e=>u.value.phone=e.detail.value)),j:l.value.phone},l.value.phone?{k:e.t(l.value.phone)}:{},{l:l.value.age?1:"",m:u.value.age,n:e.o((e=>u.value.age=e.detail.value)),o:l.value.age},l.value.age?{p:e.t(l.value.age)}:{},{q:e.t(u.value.subject||"请选择兴趣科目"),r:u.value.subject?"":1,s:o.value,t:e.o(v),v:e.t(t.value?"提交中...":"立即预约"),w:t.value,x:e.o(s)})}},u=e._export_sfc(n,[["__scopeId","data-v-d20f4e97"]]);wx.createPage(u);
