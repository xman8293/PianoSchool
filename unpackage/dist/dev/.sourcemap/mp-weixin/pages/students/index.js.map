{"version":3,"file":"index.js","sources":["pages/students/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3R1ZGVudHMvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"student-list-container\">\r\n    <!-- Ê†áÈ¢òÂå∫Âüü -->\r\n    <view class=\"section-header\">\r\n      <text class=\"title\">‰ºòÁßÄÂ≠¶Âëò</text>\r\n    </view>\r\n\r\n    <!-- Â≠¶ÂëòÂàóË°® -->\r\n    <view class=\"student-grid\">\r\n      <view \r\n        v-for=\"(item, index) in studentList\" \r\n        :key=\"index\"\r\n        class=\"student-card\"\r\n      >\r\n        <view class=\"avatar-wrapper\">\r\n          <image \r\n            :src=\"item.avatar || '/static/default-avatar.png'\" \r\n            mode=\"aspectFill\" \r\n            class=\"avatar\"\r\n          />\r\n          <view class=\"honor-tag\">üéñÔ∏è {{ item.honor || 'Âπ¥Â∫¶‰ºòÁßÄÂ≠¶Âëò' }}</view>\r\n        </view>\r\n        <view class=\"info\">\r\n          <text class=\"name\">{{ item.name }}</text>\r\n          <view class=\"intro-wrapper\">\r\n            <text \r\n              class=\"intro\" \r\n              @touchstart=\"showTooltip($event, item.intro)\" \r\n              @touchend=\"hideTooltip\"\r\n            >\r\n              {{ item.intro }}\r\n            </text>\r\n          </view>\r\n          <text v-if=\"item.achievement\" class=\"achievement\">üèÜ {{ item.achievement }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-if=\"showPopup\" class=\"tooltip\" :style=\"tooltipPosition\">\r\n      {{ currentIntro }}\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\n\r\nconst studentList = ref([])\r\nconst showPopup = ref(false)\r\nconst currentIntro = ref('')\r\nconst tooltipPosition = ref({ left: '0', top: '0' })\r\n\r\nconst showTooltip = (e, intro) => {\r\n  const query = uni.createSelectorQuery().in(this)\r\n  query.select('.student-list-container').boundingClientRect()\r\n  query.exec(res => {\r\n    const container = res[0]\r\n    const { pageX, pageY } = e.touches[0]\r\n    tooltipPosition.value = {\r\n      left: `${pageX - container.left - 100}px`,\r\n      top: `${pageY - container.top - 60}px`\r\n    }\r\n    currentIntro.value = intro\r\n    showPopup.value = true\r\n  })\r\n}\r\n\r\nconst hideTooltip = () => {\r\n  showPopup.value = false\r\n}\r\n\r\nconst loadData = async () => {\r\n  try {\r\n    const res = await uniCloud.callFunction({\r\n      name: 'getStudents',\r\n      data: { \r\n        pageSize: 20,\r\n        orderBy: 'sort'\r\n      }\r\n    })\r\n    studentList.value = res.result.data.list.map(item => ({\r\n      ...item,\r\n      achievement: item.achievement || '2025Âπ¥Â∫¶‰ºòÁßÄÂ≠¶Âëò'\r\n    }))\r\n  } catch (e) {\r\n    console.error('Âä†ËΩΩÂ§±Ë¥•:', e)\r\n    uni.showToast({ title: 'Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•', icon: 'none' })\r\n  }\r\n}\r\n\r\nloadData()\r\n</script>\r\n\r\n<style scoped>\r\n.student-list-container {\r\n  background: #f5f7fa;\r\n  min-height: 100vh;\r\n  padding: 30rpx;\r\n}\r\n\r\n.section-header {\r\n  background: linear-gradient(135deg, #2A3F54, #3A5F7A);\r\n  border-radius: 16rpx;\r\n  margin: 30rpx;\r\n  padding: 40rpx 0;\r\n  box-shadow: 0 8rpx 24rpx rgba(42,63,84,0.15);\r\n}\r\n\r\n.title {\r\n  font-size: 40rpx;\r\n  font-weight: 600;\r\n  color: #FFFFFF;\r\n  text-align: center;\r\n  display: block;\r\n  text-shadow: 0 2rpx 4rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.student-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 30rpx;\r\n  padding: 0 30rpx;\r\n}\r\n\r\n.student-card {\r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.08);\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.student-card:active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.avatar-wrapper {\r\n  position: relative;\r\n  height: 360rpx;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.avatar {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.honor-tag {\r\n  position: absolute;\r\n  bottom: 20rpx;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: linear-gradient(45deg, #2A3F54, #3A5F7A);\r\n  color: #FFFFFF;\r\n  padding: 8rpx 30rpx;\r\n  border-radius: 40rpx;\r\n  font-size: 24rpx;\r\n  font-weight: 500;\r\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.1);\r\n  max-width: 80%;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.info {\r\n  padding: 24rpx;\r\n  background: #fff;\r\n}\r\n\r\n.name {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #2A3F54;\r\n  display: block;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.intro-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.intro {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  line-height: 1.4;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  overflow: hidden;\r\n  margin-bottom: 8rpx;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.achievement {\r\n  display: block;\r\n  font-size: 24rpx;\r\n  color: #007BFF;\r\n  font-weight: 500;\r\n}\r\n\r\n/* Êñ∞Â¢ûÊèêÁ§∫Ê°ÜÊ†∑Âºè */\r\n.tooltip {\r\n  position: fixed;\r\n  background: rgba(0,0,0,0.9);\r\n  color: #fff;\r\n  padding: 20rpx 30rpx;\r\n  border-radius: 12rpx;\r\n  font-size: 26rpx;\r\n  line-height: 1.4;\r\n  max-width: 500rpx;\r\n  z-index: 999;\r\n  pointer-events: none;\r\n  animation: fadeIn 0.2s ease;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { opacity: 0; transform: translateY(10rpx); }\r\n  to { opacity: 1; transform: translateY(0); }\r\n}\r\n</style> ","import MiniProgramPage from 'E:/MyProject/PianoSchool/pages/students/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","uniCloud"],"mappings":";;;;;AA8CA,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,YAAYA,cAAG,IAAC,KAAK;AAC3B,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,kBAAkBA,cAAG,IAAC,EAAE,MAAM,KAAK,KAAK,KAAK;AAEnD,UAAM,cAAc,CAAC,GAAG,UAAU;AAChC,YAAM,QAAQC,cAAG,MAAC,oBAAmB,EAAG,GAAG,IAAI;AAC/C,YAAM,OAAO,yBAAyB,EAAE,mBAAoB;AAC5D,YAAM,KAAK,SAAO;AAChB,cAAM,YAAY,IAAI,CAAC;AACvB,cAAM,EAAE,OAAO,MAAK,IAAK,EAAE,QAAQ,CAAC;AACpC,wBAAgB,QAAQ;AAAA,UACtB,MAAM,GAAG,QAAQ,UAAU,OAAO,GAAG;AAAA,UACrC,KAAK,GAAG,QAAQ,UAAU,MAAM,EAAE;AAAA,QACnC;AACD,qBAAa,QAAQ;AACrB,kBAAU,QAAQ;AAAA,MACtB,CAAG;AAAA,IACH;AAEA,UAAM,cAAc,MAAM;AACxB,gBAAU,QAAQ;AAAA,IACpB;AAEA,UAAM,WAAW,YAAY;AAC3B,UAAI;AACF,cAAM,MAAM,MAAMC,cAAQ,GAAC,aAAa;AAAA,UACtC,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,UAAU;AAAA,YACV,SAAS;AAAA,UACV;AAAA,QACP,CAAK;AACD,oBAAY,QAAQ,IAAI,OAAO,KAAK,KAAK,IAAI,WAAS;AAAA,UACpD,GAAG;AAAA,UACH,aAAa,KAAK,eAAe;AAAA,QACvC,EAAM;AAAA,MACH,SAAQ,GAAG;AACVD,sBAAAA,MAAA,MAAA,SAAA,kCAAc,SAAS,CAAC;AACxBA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ;AAAA,MAChD;AAAA,IACH;AAEA,aAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFV,GAAG,WAAW,eAAe;"}